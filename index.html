<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prototype Dashboard</title>
    <link rel="stylesheet" href="style.css"> 
</head>
<body>
    <!-- <div id="top-toolbar" class="toolbar"> -->
        <!-- <ul> -->
            <!-- <li><a href="#file">File</a></li> -->
            <!-- <li><a href="#help">Help</a></li> -->
            <!-- <li><a href="#spatial-data-viewer">Spatial Data Viewer</a></li> -->
            <!-- <li><a href="#raw-data-viewer">Raw Data Viewer</a></li> -->
        <!-- </ul> -->
    <!-- </div> -->
    <div id="spatial-view"></div>
        <div id="right-pane">
            <div class="plot-box" id="plot-box1"></div>
            <div class="plot-box" id="plot-box2"></div> 
        </div>
    <div id="left-pane">
        <div id="obj-toolbar" class="toolbar obj"></div>
        <div id="toolbar" class="toolbar">
            <div class="toggle">
                <input type="radio" id="toggle-none" name="visualizationOption" checked>
                <label for="toggle-none">None</label>
            </div>
            <div class="toggle">
                <input type="radio" id="toggle-speech" name="visualizationOption">
                <label for="toggle-speech">Speech</label>
            </div>
            <div class="toggle">
                <input type="radio" id="toggle-xr-interaction" name="visualizationOption">
                <label for="toggle-xr-interaction">XR Interaction</label>
            </div>
        </div>
        <div id="user-toolbar" class="toolbar">
            <div class="toggle">
                <input type="checkbox" id="toggle-user0" name="userVisibility" checked>
                <label for="toggle-user0">User 1</label>
            </div>
            <div class="toggle">
                <input type="checkbox" id="toggle-user1" name="userVisibility" checked>
                <label for="toggle-user1">User 2</label>
            </div>
            <div class="toggle">
                <input type="checkbox" id="toggle-user2" name="userVisibility" checked>
                <label for="toggle-user2">User 3</label>
            </div>
    </div>
    <script>
        function createListItem(name, isFolder = false, children = []) {
        const listItem = document.createElement('li');
        listItem.style.listStyle = 'none';
        if (isFolder) {
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.id = name;
            checkbox.checked = true ;
            listItem.appendChild(checkbox);

            const label = document.createElement('label');
            label.setAttribute('for', name);
            label.textContent = name;
            listItem.appendChild(label);

            const subList = document.createElement('ul');
            children.forEach(child => {
                subList.appendChild(createListItem(child.name, child.type === "folder", child.children || []));
            });
            listItem.appendChild(subList);
            checkbox.addEventListener('change', function() {
            const subCheckboxes = subList.querySelectorAll('input[type="checkbox"]');
            subCheckboxes.forEach(subCheckbox => subCheckbox.checked = this.checked);
            });           
        } else {
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.id = name;
            checkbox.checked = true ;

            const label = document.createElement('label');
            label.setAttribute('for', name);
            label.textContent = name;

            listItem.appendChild(checkbox);
            listItem.appendChild(label);
        }
        return listItem;
    }

    function generateToolbar(folderStructure) {
        const toolbar = document.getElementById('obj-toolbar');
        const list = document.createElement('ul');
        Object.keys(folderStructure).forEach(key => {
            const isFolder = Array.isArray(folderStructure[key]);
            list.appendChild(createListItem(key, isFolder, folderStructure[key]));
        });
        toolbar.appendChild(list);
        const mainOptions = document.querySelectorAll('.main-option');
        mainOptions.forEach(mainOption => {
            mainOption.addEventListener('change', function() {
                const subOptions = this.parentElement.querySelector('.sub-options-list').querySelectorAll('input[type="checkbox"]');
                subOptions.forEach(subOption => subOption.checked = this.checked);
            });
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
            fetch('folderStructure.json') 
                .then(response => response.json())
                .then(data => {
                    generateToolbar(data);
                    const checkedCheckboxes = document.querySelectorAll('#obj-toolbar input[type="checkbox"]:checked');
                })
                .catch(error => console.error('Error loading folder structure:', error));
        });
    </script>
    </div>
    <!-- <div id="slider-container">
        <div id="playPauseButton" class="play-pause-icon">
        </div>
        <div id="timeDisplay">00:00:00</div>
    </div> -->
    <div id="temporal-view" style="position: relative;">
        <div id="slider-container">
            <div id="playPauseButton" class="play-pause-icon">
            </div>
            <div id="timeDisplay">00:00:00</div>
            
        </div>
       
        <div id="shared-axis-container">
            <svg id="shared-axis"></svg>
        </div>
        <div id="bin-selection-container">
        <label for="binsDropdown">Number of Bins</label>
                <select id="binsDropdown">
                <option value="5"  selected>5</option>
                <option value="10" >10</option>
                <option value="20">20</option>
                <option value="30">30</option>
                </select>
        </div>
        <div id="interaction-plot-container">
            <svg id="interaction-plot"></svg>
        </div>
        <div id="speech-plot-container">
            <svg id="speech-plot"></svg>
        </div>
        <svg style="position: absolute; top: 25; left: 0; z-index: 1;  pointer-events: none;" width="100%" height="100% ">
            <line id="time-indicator-line" x1="100" y1="24" x2="100" y2="100%"></line>
            <circle id="time-indicator-circle" cx="100" cy="24" r="5" fill="black"></circle>
        </svg>
    </div>
    <script type="module" src="src/script.js"></script>
    <script type="module" src="src/objToolbar.js"></script>
</body>
</html>


